<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CustomJooqAutoGenerator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">SwaggerCodeGen</a> &gt; <a href="index.source.html" class="el_package">org.gemini.codegen.jooqpojogen</a> &gt; <span class="el_source">CustomJooqAutoGenerator.java</span></div><h1>CustomJooqAutoGenerator.java</h1><pre class="source lang-java linenums">package org.gemini.codegen.jooqpojogen;

import org.jooq.Configuration;
import org.jooq.Constants;
import org.jooq.Record;
import org.jooq.codegen.GeneratorStrategy;
import org.jooq.codegen.JavaGenerator;
import org.jooq.codegen.JavaWriter;
import org.jooq.impl.DAOImpl;
import org.jooq.meta.*;
import org.jooq.tools.JooqLogger;
import org.jooq.tools.StringUtils;

import java.beans.ConstructorProperties;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;


<span class="nc" id="L21">public class CustomJooqAutoGenerator extends JavaGenerator {</span>

<span class="nc" id="L23">    private static final JooqLogger LOG = JooqLogger.getLogger(CustomJooqAutoGenerator.class);</span>

    private static final &lt;T&gt; List&lt;T&gt; list(T first, List&lt;T&gt; remaining) {
<span class="nc" id="L26">        List&lt;T&gt; result = new ArrayList&lt;&gt;();</span>

<span class="nc" id="L28">        result.addAll(list(first));</span>
<span class="nc" id="L29">        result.addAll(remaining);</span>

<span class="nc" id="L31">        return result;</span>
    }

    private static final &lt;T&gt; List&lt;T&gt; list(T... objects) {
<span class="nc" id="L35">        List&lt;T&gt; result = new ArrayList&lt;&gt;();</span>

<span class="nc bnc" id="L37" title="All 2 branches missed.">        if (objects != null) {</span>
<span class="nc bnc" id="L38" title="All 2 branches missed.">            for (T object : objects) {</span>
<span class="nc bnc" id="L39" title="All 4 branches missed.">                if (object != null &amp;&amp; !&quot;&quot;.equals(object)) {</span>
<span class="nc" id="L40">                    result.add(object);</span>
                }
            }
        }

<span class="nc" id="L45">        return result;</span>
    }

    @Override
    protected void generatePojo(TableDefinition table) {
<span class="nc" id="L50">        JavaWriter out = newJavaWriter(getFile(table, GeneratorStrategy.Mode.POJO));</span>
<span class="nc" id="L51">        LOG.info(&quot;Generating POJO &quot;, out.file().getName());</span>
<span class="nc" id="L52">        generatePojo(table, out);</span>
<span class="nc" id="L53">        closeJavaWriter(out);</span>
<span class="nc" id="L54">        super.generatePojo(table);</span>
<span class="nc" id="L55">    }</span>

    protected void generatePojo(TableDefinition table, JavaWriter out) {
<span class="nc" id="L58">        generatePojoClass(table, out);</span>
<span class="nc" id="L59">    }</span>

    private final void generatePojoClass(Definition tableUdtOrEmbeddable, JavaWriter out) {
<span class="nc" id="L62">        final String className = getStrategy().getJavaClassName(tableUdtOrEmbeddable, GeneratorStrategy.Mode.POJO);</span>
<span class="nc bnc" id="L63" title="All 2 branches missed.">        final String interfaceName = generateInterfaces()</span>
<span class="nc" id="L64">                ? out.ref(getStrategy().getFullJavaClassName(tableUdtOrEmbeddable, GeneratorStrategy.Mode.INTERFACE))</span>
<span class="nc" id="L65">                : &quot;&quot;;</span>
<span class="nc" id="L66">        final String superName = out.ref(getStrategy().getJavaClassExtends(tableUdtOrEmbeddable, GeneratorStrategy.Mode.POJO));</span>
<span class="nc" id="L67">        final List&lt;String&gt; interfaces = out.ref(getStrategy().getJavaClassImplements(tableUdtOrEmbeddable, GeneratorStrategy.Mode.POJO));</span>

<span class="nc bnc" id="L69" title="All 2 branches missed.">        if (generateInterfaces()) {</span>
<span class="nc" id="L70">            interfaces.add(interfaceName);</span>
        }

//        final List&lt;String&gt; superTypes = list(superName, interfaces);
<span class="nc" id="L74">        printPackage(out, tableUdtOrEmbeddable, GeneratorStrategy.Mode.POJO);</span>

<span class="nc bnc" id="L76" title="All 2 branches missed.">        if (tableUdtOrEmbeddable instanceof TableDefinition) {</span>
<span class="nc" id="L77">            generatePojoClassJavadoc((TableDefinition) tableUdtOrEmbeddable, out);</span>
<span class="nc bnc" id="L78" title="All 2 branches missed.">        } else if (tableUdtOrEmbeddable instanceof EmbeddableDefinition) {</span>
<span class="nc" id="L79">            generateEmbeddableClassJavadoc((EmbeddableDefinition) tableUdtOrEmbeddable, out);</span>
        } else {
<span class="nc" id="L81">            generateUDTPojoClassJavadoc((UDTDefinition) tableUdtOrEmbeddable, out);</span>
        }

<span class="nc" id="L84">        printClassAnnotations(out, tableUdtOrEmbeddable, GeneratorStrategy.Mode.POJO);</span>

<span class="nc bnc" id="L86" title="All 2 branches missed.">        if (tableUdtOrEmbeddable instanceof TableDefinition) {</span>
<span class="nc" id="L87">            printTableJPAAnnotation(out, (TableDefinition) tableUdtOrEmbeddable);</span>
        }

<span class="nc" id="L90">        int maxLength = 0;</span>
<span class="nc bnc" id="L91" title="All 2 branches missed.">        for (TypedElementDefinition&lt;?&gt; column : getTypedElementsMethod(tableUdtOrEmbeddable)) {</span>
<span class="nc" id="L92">            maxLength = Math.max(maxLength, out.ref(getJavaType(column.getType(resolver(out, GeneratorStrategy.Mode.POJO)), out, GeneratorStrategy.Mode.POJO)).length());</span>
<span class="nc" id="L93">        }</span>

<span class="nc" id="L95">        out.println(&quot;public class %s[[before= extends ][%s]][[before= implements ][%s]] {&quot;, className, list(superName), interfaces);</span>

<span class="nc bnc" id="L97" title="All 4 branches missed.">        if (generateSerializablePojos() || generateSerializableInterfaces()) {</span>
<span class="nc" id="L98">            out.printSerial();</span>
        }

<span class="nc" id="L101">        out.println();</span>

<span class="nc bnc" id="L103" title="All 2 branches missed.">        for (TypedElementDefinition&lt;?&gt; column : getTypedElementsMethod(tableUdtOrEmbeddable)) {</span>
<span class="nc bnc" id="L104" title="All 2 branches missed.">            if (column instanceof ColumnDefinition) {</span>
<span class="nc" id="L105">                printColumnJPAAnnotation(out, (ColumnDefinition) column);</span>
            }

<span class="nc" id="L108">            out.println(&quot;private %s%s %s;&quot;,</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">                    generateImmutablePojos() ? &quot;final &quot; : &quot;&quot;,</span>
<span class="nc" id="L110">                    StringUtils.rightPad(out.ref(getJavaType(column.getType(resolver(out, GeneratorStrategy.Mode.POJO)), out, GeneratorStrategy.Mode.POJO)), maxLength),</span>
<span class="nc" id="L111">                    getStrategy().getJavaMemberName(column, GeneratorStrategy.Mode.POJO));</span>

<span class="nc" id="L113">        }</span>

        // Constructors
        // ---------------------------------------------------------------------

        // Default constructor
<span class="nc bnc" id="L119" title="All 2 branches missed.">        if (!generateImmutablePojos()) {</span>
<span class="nc" id="L120">            generatePojoDefaultConstructor(tableUdtOrEmbeddable, out);</span>
        }


        // [#1363] [#7055] copy constructor
<span class="nc" id="L125">        generatePojoCopyConstructor(tableUdtOrEmbeddable, out);</span>

        // Multi-constructor
<span class="nc" id="L128">        generatePojoMultiConstructor(tableUdtOrEmbeddable, out);</span>

<span class="nc" id="L130">        List&lt;? extends TypedElementDefinition&lt;?&gt;&gt; elements = getTypedElementsMethod(tableUdtOrEmbeddable);</span>
<span class="nc bnc" id="L131" title="All 2 branches missed.">        for (int i = 0; i &lt; elements.size(); i++) {</span>
<span class="nc" id="L132">            TypedElementDefinition&lt;?&gt; column = elements.get(i);</span>

<span class="nc bnc" id="L134" title="All 2 branches missed.">            if (tableUdtOrEmbeddable instanceof TableDefinition) {</span>
<span class="nc" id="L135">                generatePojoGetter(column, i, out);</span>
            } else {
<span class="nc" id="L137">                generateUDTPojoGetter(column, i, out);</span>
            }

            // Setter
<span class="nc bnc" id="L141" title="All 2 branches missed.">            if (!generateImmutablePojos()) {</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">                if (tableUdtOrEmbeddable instanceof TableDefinition) {</span>
<span class="nc" id="L143">                    generatePojoSetter(column, i, out);</span>
                } else {
<span class="nc" id="L145">                    generateUDTPojoSetter(column, i, out);</span>
                }
            }
        }


<span class="nc bnc" id="L151" title="All 2 branches missed.">        if (tableUdtOrEmbeddable instanceof TableDefinition) {</span>
<span class="nc" id="L152">            List&lt;EmbeddableDefinition&gt; embeddables = ((TableDefinition) tableUdtOrEmbeddable).getReferencedEmbeddables();</span>

<span class="nc bnc" id="L154" title="All 2 branches missed.">            for (int i = 0; i &lt; embeddables.size(); i++) {</span>
<span class="nc" id="L155">                EmbeddableDefinition embeddable = embeddables.get(i);</span>

<span class="nc" id="L157">                generateEmbeddablePojoSetter(embeddable, i, out);</span>
<span class="nc" id="L158">                generateEmbeddablePojoGetter(embeddable, i, out);</span>
            }
        }

<span class="nc bnc" id="L162" title="All 2 branches missed.">        if (generatePojosEqualsAndHashCode()) {</span>
<span class="nc" id="L163">            generatePojoEqualsAndHashCode(tableUdtOrEmbeddable, out);</span>
        }

<span class="nc bnc" id="L166" title="All 2 branches missed.">        if (generatePojosToString()) {</span>
<span class="nc" id="L167">            generatePojoToString(tableUdtOrEmbeddable, out);</span>
        }

<span class="nc bnc" id="L170" title="All 4 branches missed.">        if (generateInterfaces() &amp;&amp; !generateImmutablePojos()) {</span>
<span class="nc" id="L171">            printFromAndIntoMethod(out, tableUdtOrEmbeddable, GeneratorStrategy.Mode.POJO);</span>
        }

<span class="nc bnc" id="L174" title="All 2 branches missed.">        if (tableUdtOrEmbeddable instanceof TableDefinition) {</span>
<span class="nc" id="L175">            generatePojoClassFooter((TableDefinition) tableUdtOrEmbeddable, out);</span>
<span class="nc bnc" id="L176" title="All 2 branches missed.">        } else if (tableUdtOrEmbeddable instanceof EmbeddableDefinition) {</span>
<span class="nc" id="L177">            generateEmbeddableClassFooter((EmbeddableDefinition) tableUdtOrEmbeddable, out);</span>
        } else {
<span class="nc" id="L179">            generateUDTPojoClassFooter((UDTDefinition) tableUdtOrEmbeddable, out);</span>
        }

<span class="nc" id="L182">        out.println(&quot;}&quot;);</span>
<span class="nc" id="L183">        closeJavaWriter(out);</span>
<span class="nc" id="L184">    }</span>

    protected void printColumnJPAAnnotation(JavaWriter out, ColumnDefinition column) {
<span class="nc" id="L187">        int indent = out.indent();</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">        if (this.generateJPAAnnotations()) {</span>
<span class="nc" id="L189">            String prefix = &quot;&quot;;</span>
<span class="nc" id="L190">            UniqueKeyDefinition pk = column.getPrimaryKey();</span>
<span class="nc bnc" id="L191" title="All 2 branches missed.">            if (pk != null) {</span>
<span class="nc" id="L192">                out.println(&quot;@%s%s&quot;, prefix, out.ref(&quot;javax.persistence.Id&quot;));</span>
<span class="nc bnc" id="L193" title="All 2 branches missed.">                for (ColumnDefinition s : pk.getKeyColumns()) {</span>
<span class="nc bnc" id="L194" title="All 2 branches missed.">                    if (s.isIdentity()) {</span>
<span class="nc" id="L195">                        out.println(&quot;@%s%s(strategy = %s.IDENTITY)&quot;, prefix, out.ref(&quot;javax.persistence.GeneratedValue&quot;), out.ref(&quot;javax.persistence.GenerationType&quot;));</span>
                    }
<span class="nc" id="L197">                }</span>
            }

<span class="nc" id="L200">            String nullable = &quot;&quot;;</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">            if (!column.getType(this.resolver(out)).isNullable()) {</span>
<span class="nc" id="L202">                nullable = &quot;, nullable = false&quot;;</span>
            }

<span class="nc" id="L205">            String length = &quot;&quot;;</span>
<span class="nc" id="L206">            String precision = &quot;&quot;;</span>
<span class="nc" id="L207">            String scale = &quot;&quot;;</span>
<span class="nc bnc" id="L208" title="All 2 branches missed.">            if (column.getType(this.resolver(out)).getLength() &gt; 0) {</span>
<span class="nc" id="L209">                length = &quot;, length = &quot; + column.getType(this.resolver(out)).getLength();</span>
<span class="nc bnc" id="L210" title="All 2 branches missed.">            } else if (column.getType(this.resolver(out)).getPrecision() &gt; 0) {</span>
<span class="nc" id="L211">                precision = &quot;, precision = &quot; + column.getType(this.resolver(out)).getPrecision();</span>
<span class="nc bnc" id="L212" title="All 2 branches missed.">                if (column.getType(this.resolver(out)).getScale() &gt; 0) {</span>
<span class="nc" id="L213">                    scale = &quot;, scale = &quot; + column.getType(this.resolver(out)).getScale();</span>
                }
            }

<span class="nc" id="L217">            out.print(&quot;@%s%s(name = \&quot;&quot;, prefix, out.ref(&quot;javax.persistence.Column&quot;));</span>
<span class="nc" id="L218">            out.print(this.escapeStringMethod(column.getName()));</span>
<span class="nc" id="L219">            out.print(&quot;\&quot;&quot;);</span>
<span class="nc" id="L220">            out.print(nullable);</span>
<span class="nc" id="L221">            out.print(length);</span>
<span class="nc" id="L222">            out.print(precision);</span>
<span class="nc" id="L223">            out.print(scale);</span>
<span class="nc" id="L224">            out.println(&quot;)&quot;);</span>
        }

<span class="nc" id="L227">        out.indent(indent);</span>
<span class="nc" id="L228">    }</span>

    protected void generatePojoMultiConstructor(Definition tableOrUDT, JavaWriter out) {
<span class="nc" id="L231">        final String className = getStrategy().getJavaClassName(tableOrUDT, GeneratorStrategy.Mode.POJO);</span>
<span class="nc" id="L232">        final List&lt;String&gt; properties = new ArrayList&lt;&gt;();</span>

<span class="nc" id="L234">        int maxLength = 0;</span>
<span class="nc bnc" id="L235" title="All 2 branches missed.">        for (TypedElementDefinition&lt;?&gt; column : getTypedElementsMethod(tableOrUDT)) {</span>
<span class="nc" id="L236">            maxLength = Math.max(maxLength, out.ref(getJavaType(column.getType(resolver(out, GeneratorStrategy.Mode.POJO)), out, GeneratorStrategy.Mode.POJO)).length());</span>
<span class="nc" id="L237">            properties.add(&quot;\&quot;&quot; + escapeStringMethod(getStrategy().getJavaMemberName(column, GeneratorStrategy.Mode.POJO)) + &quot;\&quot;&quot;);</span>
<span class="nc" id="L238">        }</span>


        // [#3010] Invalid UDTs may have no attributes. Avoid generating this constructor in that case
        // [#3176] Avoid generating constructors for tables with more than 255 columns (Java's method argument limit)
<span class="nc bnc" id="L243" title="All 2 branches missed.">        if (getTypedElementsMethod(tableOrUDT).size() &gt; 0 &amp;&amp;</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">                getTypedElementsMethod(tableOrUDT).size() &lt; 256) {</span>
<span class="nc" id="L245">            out.println();</span>

<span class="nc bnc" id="L247" title="All 2 branches missed.">            if (generateConstructorPropertiesAnnotationOnPojos()) {</span>
<span class="nc" id="L248">                out.println(&quot;@%s({ [[%s]] })&quot;, ConstructorProperties.class, properties);</span>
            }

<span class="nc" id="L251">            out.print(&quot;public %s(&quot;, className);</span>

<span class="nc" id="L253">            String separator1 = &quot;&quot;;</span>
<span class="nc bnc" id="L254" title="All 2 branches missed.">            for (TypedElementDefinition&lt;?&gt; column : getTypedElementsMethod(tableOrUDT)) {</span>
<span class="nc" id="L255">                final String nullableAnnotation = nullableOrNonnullAnnotationMethod(out, column);</span>

<span class="nc" id="L257">                out.println(separator1);</span>
<span class="nc" id="L258">                out.print(&quot;[[before=@][after= ][%s]]%s %s&quot;,</span>
<span class="nc" id="L259">                        list(nullableAnnotation),</span>
<span class="nc" id="L260">                        StringUtils.rightPad(out.ref(getJavaType(column.getType(resolver(out, GeneratorStrategy.Mode.POJO)), out, GeneratorStrategy.Mode.POJO)), maxLength),</span>
<span class="nc" id="L261">                        getStrategy().getJavaMemberName(column, GeneratorStrategy.Mode.POJO));</span>
<span class="nc" id="L262">                separator1 = &quot;,&quot;;</span>
<span class="nc" id="L263">            }</span>

<span class="nc" id="L265">            out.println();</span>
<span class="nc" id="L266">            out.println(&quot;) {&quot;);</span>

<span class="nc bnc" id="L268" title="All 2 branches missed.">            for (TypedElementDefinition&lt;?&gt; column : getTypedElementsMethod(tableOrUDT)) {</span>
<span class="nc" id="L269">                final String columnMember = getStrategy().getJavaMemberName(column, GeneratorStrategy.Mode.POJO);</span>

<span class="nc" id="L271">                out.println(&quot;this.%s = %s;&quot;, columnMember, columnMember);</span>
<span class="nc" id="L272">            }</span>

<span class="nc" id="L274">            out.println(&quot;}&quot;);</span>
        }
<span class="nc" id="L276">    }</span>

    /**
     * Subclasses may override this method to provide their own pojo copy constructors.
     */
    protected void generatePojoCopyConstructor(Definition tableOrUDT, JavaWriter out) {
<span class="nc" id="L282">        final String className = getStrategy().getJavaClassName(tableOrUDT, GeneratorStrategy.Mode.POJO);</span>
<span class="nc bnc" id="L283" title="All 2 branches missed.">        final String interfaceName = generateInterfaces()</span>
<span class="nc" id="L284">                ? out.ref(getStrategy().getFullJavaClassName(tableOrUDT, GeneratorStrategy.Mode.INTERFACE))</span>
<span class="nc" id="L285">                : &quot;&quot;;</span>

<span class="nc" id="L287">        out.println();</span>

<span class="nc bnc" id="L289" title="All 2 branches missed.">        out.println(&quot;public %s(%s value) {&quot;, className, generateInterfaces() ? interfaceName : className);</span>

<span class="nc bnc" id="L291" title="All 2 branches missed.">        for (TypedElementDefinition&lt;?&gt; column : getTypedElementsMethod(tableOrUDT)) {</span>
<span class="nc" id="L292">            out.println(&quot;this.%s = value.%s%s;&quot;,</span>
<span class="nc" id="L293">                    getStrategy().getJavaMemberName(column, GeneratorStrategy.Mode.POJO),</span>
<span class="nc bnc" id="L294" title="All 2 branches missed.">                    generateInterfaces()</span>
<span class="nc" id="L295">                            ? getStrategy().getJavaGetterName(column, GeneratorStrategy.Mode.INTERFACE)</span>
<span class="nc" id="L296">                            : getStrategy().getJavaMemberName(column, GeneratorStrategy.Mode.POJO),</span>
<span class="nc bnc" id="L297" title="All 2 branches missed.">                    generateInterfaces()</span>
<span class="nc" id="L298">                            ? &quot;()&quot;</span>
<span class="nc" id="L299">                            : &quot;&quot;);</span>


<span class="nc" id="L302">        }</span>
<span class="nc" id="L303">        out.println(&quot;}&quot;);</span>
<span class="nc" id="L304">    }</span>

    /**
     * Subclasses may override this method to provide their own pojo default constructors.
     */
    protected void generatePojoDefaultConstructor(Definition tableOrUDT, JavaWriter out) {
<span class="nc" id="L310">        final String className = getStrategy().getJavaClassName(tableOrUDT, GeneratorStrategy.Mode.POJO);</span>

<span class="nc" id="L312">        out.println();</span>
//        int size = getTypedElements(tableOrUDT).size();
        // [#6248] [#10288] The no-args constructor isn't needed because we have named, defaulted parameters
<span class="nc" id="L315">        out.println(&quot;public %s() {}&quot;, className);</span>

<span class="nc" id="L317">    }</span>

    @Override
    protected void generatePojoGetter(TypedElementDefinition&lt;?&gt; column, int index, JavaWriter out) {
<span class="nc" id="L321">        generatePojoGetterClass(column, index, out);</span>
<span class="nc" id="L322">    }</span>

    /**
     * Subclasses may override this method to provide their own pojo getters.
     */

    private final void generatePojoGetterClass(TypedElementDefinition&lt;?&gt; column, @SuppressWarnings(&quot;unused&quot;) int index, JavaWriter out) {
<span class="nc" id="L329">        final String columnTypeFull = getJavaType(column.getType(resolver(out, GeneratorStrategy.Mode.POJO)), out, GeneratorStrategy.Mode.POJO);</span>
<span class="nc" id="L330">        final String columnType = out.ref(columnTypeFull);</span>
<span class="nc" id="L331">        final String columnGetter = getStrategy().getJavaGetterName(column, GeneratorStrategy.Mode.POJO);</span>
<span class="nc" id="L332">        final String columnMember = getStrategy().getJavaMemberName(column, GeneratorStrategy.Mode.POJO);</span>
<span class="nc" id="L333">        final String name = column.getQualifiedOutputName();</span>

        // Getter
<span class="nc bnc" id="L336" title="All 2 branches missed.">        if (!printDeprecationIfUnknownTypeMethod(out, columnTypeFull)) {</span>
<span class="nc" id="L337">            out.javadoc(&quot;Getter for &lt;code&gt;%s&lt;/code&gt;.[[before= ][%s]]&quot;, name, list(escapeEntities(commentMethod(column))));</span>
        }

<span class="nc" id="L340">        printValidationAnnotationClass(out, column);</span>
<span class="nc" id="L341">        printNullableOrNonnullAnnotationClass(out, column);</span>


<span class="nc" id="L344">        out.overrideIf(generateInterfaces());</span>
<span class="nc" id="L345">        out.println(&quot;public %s %s() {&quot;, columnType, columnGetter);</span>
<span class="nc" id="L346">        out.println(&quot;return this.%s;&quot;, columnMember);</span>
<span class="nc" id="L347">        out.println(&quot;}&quot;);</span>

<span class="nc" id="L349">    }</span>

    private void printValidationAnnotationClass(JavaWriter out, TypedElementDefinition&lt;?&gt; column) {
<span class="nc bnc" id="L352" title="All 2 branches missed.">        if (generateValidationAnnotations()) {</span>
<span class="nc" id="L353">            String prefix = &quot;&quot;;</span>
<span class="nc" id="L354">            DataTypeDefinition type = column.getType(resolver(out));</span>

            // [#5128] defaulted columns are nullable in Java
<span class="nc bnc" id="L357" title="All 2 branches missed.">            if (!column.getType(resolver(out)).isNullable() &amp;&amp;</span>
<span class="nc bnc" id="L358" title="All 2 branches missed.">                    !column.getType(resolver(out)).isDefaulted() &amp;&amp;</span>
<span class="nc bnc" id="L359" title="All 2 branches missed.">                    !column.getType(resolver(out)).isIdentity()) {</span>
<span class="nc" id="L360">                out.println(&quot;@%s%s&quot;, prefix, out.ref(&quot;javax.validation.constraints.NotNull&quot;));</span>
            }
<span class="nc" id="L362">            String javaType = getJavaType(type, out);</span>
<span class="nc bnc" id="L363" title="All 4 branches missed.">            if (&quot;java.lang.String&quot;.equals(javaType) || &quot;byte[]&quot;.equals(javaType)) {</span>
<span class="nc" id="L364">                int length = type.getLength();</span>

<span class="nc bnc" id="L366" title="All 2 branches missed.">                if (length &gt; 0) {</span>
<span class="nc" id="L367">                    out.println(&quot;@%s%s(max = %s)&quot;, prefix, out.ref(&quot;javax.validation.constraints.Size&quot;), length);</span>
                }
            }
        }
<span class="nc" id="L371">    }</span>

    private void printNullableOrNonnullAnnotationClass(JavaWriter out, Definition column) {
<span class="nc bnc" id="L374" title="All 4 branches missed.">        if (column instanceof TypedElementDefinition &amp;&amp; ((TypedElementDefinition&lt;?&gt;) column).getType().isNullable()) {</span>
<span class="nc" id="L375">            printNullableAnnotation(out);</span>
        } else {
<span class="nc" id="L377">            printNonnullAnnotation(out);</span>
        }
<span class="nc" id="L379">    }</span>

    protected void printNullableAnnotation(JavaWriter out) {
<span class="nc bnc" id="L382" title="All 2 branches missed.">        if (generateNullableAnnotation()) {</span>
<span class="nc" id="L383">            out.println(&quot;@%s&quot;, out.ref(generatedNullableAnnotationType()));</span>
        }
<span class="nc" id="L385">    }</span>

    protected void printNonnullAnnotation(JavaWriter out) {
<span class="nc bnc" id="L388" title="All 2 branches missed.">        if (generateNonnullAnnotation()) {</span>
<span class="nc" id="L389">            out.println(&quot;@%s&quot;, out.ref(generatedNonnullAnnotationType()));</span>
        }
<span class="nc" id="L391">    }</span>

    private String commentMethod(Definition definition) {
<span class="nc bnc" id="L394" title="All 4 branches missed.">        return definition instanceof CatalogDefinition &amp;&amp; generateCommentsOnCatalogs()</span>
<span class="nc bnc" id="L395" title="All 4 branches missed.">                || definition instanceof SchemaDefinition &amp;&amp; generateCommentsOnSchemas()</span>
<span class="nc bnc" id="L396" title="All 4 branches missed.">                || definition instanceof TableDefinition &amp;&amp; generateCommentsOnTables()</span>
<span class="nc bnc" id="L397" title="All 4 branches missed.">                || definition instanceof ColumnDefinition &amp;&amp; generateCommentsOnColumns()</span>
<span class="nc bnc" id="L398" title="All 4 branches missed.">                || definition instanceof EmbeddableDefinition &amp;&amp; generateCommentsOnEmbeddables()</span>
<span class="nc bnc" id="L399" title="All 4 branches missed.">                || definition instanceof UDTDefinition &amp;&amp; generateCommentsOnUDTs()</span>
<span class="nc bnc" id="L400" title="All 4 branches missed.">                || definition instanceof AttributeDefinition &amp;&amp; generateCommentsOnAttributes()</span>
<span class="nc bnc" id="L401" title="All 4 branches missed.">                || definition instanceof PackageDefinition &amp;&amp; generateCommentsOnPackages()</span>
<span class="nc bnc" id="L402" title="All 4 branches missed.">                || definition instanceof RoutineDefinition &amp;&amp; generateCommentsOnRoutines()</span>
<span class="nc bnc" id="L403" title="All 4 branches missed.">                || definition instanceof ParameterDefinition &amp;&amp; generateCommentsOnParameters()</span>
<span class="nc bnc" id="L404" title="All 4 branches missed.">                || definition instanceof SequenceDefinition &amp;&amp; generateCommentsOnSequences()</span>
<span class="nc" id="L405">                ? StringUtils.defaultIfBlank(definition.getComment(), &quot;&quot;)</span>
<span class="nc" id="L406">                : &quot;&quot;;</span>
    }

    private boolean printDeprecationIfUnknownTypeMethod(JavaWriter out, String type) {
<span class="nc bnc" id="L410" title="All 6 branches missed.">        if (generateDeprecationOnUnknownTypes() &amp;&amp; Object.class.getName().equals(type) &amp;&amp; &quot;Any&quot;.equals(type)) {</span>

<span class="nc" id="L412">            out.javadoc(&quot;@deprecated Unknown data type. &quot;</span>
                    + &quot;Please define an explicit {@link org.jooq.Binding} to specify how this &quot;
                    + &quot;type should be handled. Deprecation can be turned off using {@literal &lt;deprecationOnUnknownTypes/&gt;} &quot;
                    + &quot;in your code generator configuration.&quot;);

<span class="nc" id="L417">            out.println(&quot;@%s&quot;, out.ref(Deprecated.class));</span>


<span class="nc" id="L420">            return true;</span>
        } else {
<span class="nc" id="L422">            return false;</span>
        }
    }

    private List&lt;? extends TypedElementDefinition&lt;? extends Definition&gt;&gt; getTypedElementsMethod(Definition definition) {
<span class="nc bnc" id="L427" title="All 2 branches missed.">        if (definition instanceof TableDefinition) {</span>
<span class="nc" id="L428">            return ((TableDefinition) definition).getColumns();</span>
<span class="nc bnc" id="L429" title="All 2 branches missed.">        } else if (definition instanceof EmbeddableDefinition) {</span>
<span class="nc" id="L430">            return ((EmbeddableDefinition) definition).getColumns();</span>
<span class="nc bnc" id="L431" title="All 2 branches missed.">        } else if (definition instanceof UDTDefinition) {</span>
<span class="nc" id="L432">            return ((UDTDefinition) definition).getAttributes();</span>
<span class="nc bnc" id="L433" title="All 2 branches missed.">        } else if (definition instanceof RoutineDefinition) {</span>
<span class="nc" id="L434">            return ((RoutineDefinition) definition).getAllParameters();</span>
        } else {
<span class="nc" id="L436">            throw new IllegalArgumentException(&quot;Unsupported type : &quot; + definition);</span>
        }
    }

    private void printFromAndIntoMethod(JavaWriter out, Definition tableOrUDT, GeneratorStrategy.Mode mode) {
<span class="nc" id="L441">        String qualified = out.ref(getStrategy().getFullJavaClassName(tableOrUDT, GeneratorStrategy.Mode.INTERFACE));</span>

<span class="nc" id="L443">        out.header(&quot;FROM and INTO&quot;);</span>
<span class="nc bnc" id="L444" title="All 4 branches missed.">        boolean override = generateInterfaces() &amp;&amp; !generateImmutableInterfaces();</span>


<span class="nc" id="L447">        out.overrideInheritIf(override);</span>
<span class="nc" id="L448">        out.println(&quot;public void from(%s from) {&quot;, qualified);</span>


<span class="nc bnc" id="L451" title="All 2 branches missed.">        for (TypedElementDefinition&lt;?&gt; column : getTypedElementsMethod(tableOrUDT)) {</span>
<span class="nc" id="L452">            final String setter = getStrategy().getJavaSetterName(column, GeneratorStrategy.Mode.INTERFACE);</span>
<span class="nc" id="L453">            final String getter = getStrategy().getJavaGetterName(column, GeneratorStrategy.Mode.INTERFACE);</span>

            // TODO: Use appropriate Mode here
//            final String member = getStrategy().getJavaMemberName(column, GeneratorStrategy.Mode.POJO);

<span class="nc" id="L458">            out.println(&quot;%s(from.%s());&quot;, setter, getter);</span>
<span class="nc" id="L459">        }</span>

<span class="nc" id="L461">        out.println(&quot;}&quot;);</span>

<span class="nc bnc" id="L463" title="All 2 branches missed.">        if (override) {</span>
            // [#10191] Java and Kotlin can produce overloads for this method despite
            // generic type erasure, but Scala cannot, see
            // https://twitter.com/lukaseder/status/1262652304773259264

<span class="nc" id="L468">            out.overrideInherit();</span>
<span class="nc" id="L469">            out.println(&quot;public &lt;E extends %s&gt; E into(E into) {&quot;, qualified);</span>
<span class="nc" id="L470">            out.println(&quot;into.from(this);&quot;);</span>
<span class="nc" id="L471">            out.println(&quot;return into;&quot;);</span>
<span class="nc" id="L472">            out.println(&quot;}&quot;);</span>

        }
<span class="nc" id="L475">    }</span>

    private String nullableOrNonnullAnnotationMethod(JavaWriter out, Definition column) {
<span class="nc bnc" id="L478" title="All 4 branches missed.">        return column instanceof TypedElementDefinition &amp;&amp; ((TypedElementDefinition&lt;?&gt;) column).getType().isNullable()</span>
<span class="nc" id="L479">                ? nullableAnnotationMethod(out)</span>
<span class="nc" id="L480">                : nonnullAnnotationMethod(out);</span>
    }

    private String nullableAnnotationMethod(JavaWriter out) {
<span class="nc bnc" id="L484" title="All 2 branches missed.">        return generateNullableAnnotation() ? out.ref(generatedNullableAnnotationType()) : null;</span>
    }

    private String nonnullAnnotationMethod(JavaWriter out) {
<span class="nc bnc" id="L488" title="All 2 branches missed.">        return generateNonnullAnnotation() ? out.ref(generatedNonnullAnnotationType()) : null;</span>
    }

    private String escapeStringMethod(String string) {

<span class="nc bnc" id="L493" title="All 2 branches missed.">        if (string == null) {</span>
<span class="nc" id="L494">            return null;</span>
        }

        // [#3450] Escape also the escape sequence, among other things that break Java strings.
<span class="nc" id="L498">        String result = string.replace(&quot;\\&quot;, &quot;\\\\&quot;)</span>
<span class="nc" id="L499">                .replace(&quot;\&quot;&quot;, &quot;\\\&quot;&quot;)</span>
<span class="nc" id="L500">                .replace(&quot;\n&quot;, &quot;\\n&quot;)</span>
<span class="nc" id="L501">                .replace(&quot;\r&quot;, &quot;\\r&quot;);</span>

        // [#10007] [#10318] Very long strings cannot be handled by the javac compiler.
<span class="nc" id="L504">        int max = 16384;</span>
<span class="nc bnc" id="L505" title="All 2 branches missed.">        if (result.length() &lt;= max) {</span>
<span class="nc" id="L506">            return result;</span>
        }

<span class="nc" id="L509">        StringBuilder sb = new StringBuilder(&quot;\&quot; + \&quot;&quot;);</span>
<span class="nc bnc" id="L510" title="All 2 branches missed.">        for (int i = 0; i &lt; result.length(); i += max) {</span>
<span class="nc bnc" id="L511" title="All 2 branches missed.">            if (i &gt; 0) {</span>
<span class="nc" id="L512">                sb.append(&quot;\&quot;.toString() + \&quot;&quot;);</span>
            }

<span class="nc" id="L515">            sb.append(result, i, Math.min(i + max, result.length()));</span>
        }

<span class="nc" id="L518">        return sb.append(&quot;\&quot;.toString() + \&quot;&quot;).toString();</span>
    }


    @Override
    protected void generateDao(TableDefinition table) {
<span class="nc" id="L524">        JavaWriter out = newJavaWriter(getFile(table, GeneratorStrategy.Mode.DAO));</span>
<span class="nc" id="L525">        LOG.info(&quot;Generating DAO&quot;, out.file().getName());</span>
<span class="nc" id="L526">        generateDao(table, out);</span>
<span class="nc" id="L527">        closeJavaWriter(out);</span>
<span class="nc" id="L528">    }</span>

    protected void generateDao(TableDefinition table, JavaWriter out) {
<span class="nc" id="L531">        UniqueKeyDefinition key = table.getPrimaryKey();</span>
<span class="nc" id="L532">        int size = key.getKeyColumns().size();</span>
<span class="nc bnc" id="L533" title="All 2 branches missed.">        if (key == null) {</span>
<span class="nc" id="L534">            LOG.info(&quot;Skipping DAO generation&quot;, out.file().getName());</span>
<span class="nc" id="L535">            return;</span>
        }

<span class="nc" id="L538">        final String className = getStrategy().getJavaClassName(table, GeneratorStrategy.Mode.DAO);</span>
<span class="nc" id="L539">        final List&lt;String&gt; interfaces = out.ref(getStrategy().getJavaClassImplements(table, GeneratorStrategy.Mode.DAO));</span>
<span class="nc" id="L540">        final String tableRecord = out.ref(getStrategy().getFullJavaClassName(table, GeneratorStrategy.Mode.RECORD));</span>
<span class="nc" id="L541">        final String daoImpl = out.ref(DAOImpl.class);</span>
<span class="nc" id="L542">        final String tableIdentifier = out.ref(getStrategy().getFullJavaIdentifier(table), 2);</span>
<span class="nc" id="L543">        String tType = &quot;Void&quot;;</span>


<span class="nc" id="L546">        String pType = out.ref(getStrategy().getFullJavaClassName(table, GeneratorStrategy.Mode.POJO));</span>

<span class="nc" id="L548">        List&lt;ColumnDefinition&gt; keyColumns = key.getKeyColumns();</span>

<span class="nc bnc" id="L550" title="All 2 branches missed.">        if (keyColumns.size() == 1) {</span>
<span class="nc" id="L551">            tType = getJavaType(keyColumns.get(0).getType(resolver(out)), out, GeneratorStrategy.Mode.POJO);</span>
        }
<span class="nc bnc" id="L553" title="All 2 branches missed.">        if (keyColumns.size() &lt;= Constants.MAX_ROW_DEGREE) {</span>
<span class="nc" id="L554">            String generics = &quot;&quot;;</span>
<span class="nc" id="L555">            String separator = &quot;&quot;;</span>

<span class="nc bnc" id="L557" title="All 2 branches missed.">            for (ColumnDefinition column : keyColumns) {</span>
<span class="nc" id="L558">                generics += separator + out.ref(getJavaType(column.getType(resolver(out)), out));</span>


<span class="nc" id="L561">                separator = &quot;, &quot;;</span>
<span class="nc" id="L562">            }</span>

<span class="nc" id="L564">        } else {</span>
<span class="nc" id="L565">            tType = Record.class.getName();</span>
        }


<span class="nc" id="L569">        printPackage(out, table, GeneratorStrategy.Mode.DAO);</span>
<span class="nc" id="L570">        tType = out.ref(tType);</span>
<span class="nc" id="L571">        out.println(&quot;import org.jooq.impl.DefaultConfiguration;&quot;);</span>
<span class="nc" id="L572">        generateDaoClassJavadoc(table, out);</span>
<span class="nc" id="L573">        printClassAnnotations(out, table, GeneratorStrategy.Mode.DAO);</span>

<span class="nc bnc" id="L575" title="All 2 branches missed.">        if (generateSpringAnnotations()) {</span>
<span class="nc" id="L576">            out.println(&quot;@%s&quot;, out.ref(&quot;org.springframework.stereotype.Repository&quot;));</span>
        }

<span class="nc" id="L579">        out.println(&quot;public class %s extends %s&lt;%s, %s, %s&gt;[[before= implements ][%s]] {&quot;, className, daoImpl, tableRecord, pType, tType, interfaces);</span>

        // Default constructor
        // -------------------
<span class="nc" id="L583">        out.javadoc(&quot;Create a new %s without any configuration&quot;, className);</span>


<span class="nc" id="L586">        out.println(&quot;public %s() {&quot;, className);</span>
<span class="nc" id="L587">        out.println(&quot;super(%s, %s.class);&quot;, tableIdentifier, pType);</span>
<span class="nc" id="L588">        out.println(&quot;}&quot;);</span>


        // Initialising constructor
        // ------------------------


<span class="nc" id="L595">        out.javadoc(&quot;Create a new %s with an attached configuration&quot;, className);</span>

<span class="nc" id="L597">        printDaoConstructorAnnotations(table, out);</span>
<span class="nc" id="L598">        out.println(&quot;public %s(%s configuration) {&quot;, className, Configuration.class);</span>
<span class="nc" id="L599">        out.println(&quot;super(%s, %s.class, configuration);&quot;, tableIdentifier, pType);</span>
<span class="nc" id="L600">        out.println(&quot;}&quot;);</span>


        // Template method implementations
        // -------------------------------

<span class="nc" id="L606">        out.overrideInherit();</span>
<span class="nc" id="L607">        printNonnullAnnotation(out);</span>
<span class="nc" id="L608">        out.println(&quot;public %s getId(%s object) {&quot;, tType, pType);</span>

<span class="nc bnc" id="L610" title="All 2 branches missed.">        if (keyColumns.size() == 1) {</span>

<span class="nc" id="L612">            out.println(&quot;return object.%s();&quot;, getStrategy().getJavaGetterName(keyColumns.get(0), GeneratorStrategy.Mode.POJO));</span>
        }
        // [#2574] This should be replaced by a call to a method on the target table's Key type
        else {
<span class="nc" id="L616">            String params = &quot;&quot;;</span>
<span class="nc" id="L617">            String separator = &quot;&quot;;</span>

<span class="nc bnc" id="L619" title="All 2 branches missed.">            for (ColumnDefinition column : keyColumns) {</span>

<span class="nc" id="L621">                params += separator + &quot;object.&quot; + getStrategy().getJavaGetterName(column, GeneratorStrategy.Mode.POJO) + &quot;()&quot;;</span>

<span class="nc" id="L623">                separator = &quot;, &quot;;</span>
<span class="nc" id="L624">            }</span>


<span class="nc" id="L627">            out.println(&quot;return compositeKeyRecord(%s);&quot;, params);</span>
        }


<span class="nc" id="L631">        out.println(&quot;}&quot;);</span>

<span class="nc bnc" id="L633" title="All 2 branches missed.">        for (ColumnDefinition column : table.getColumns()) {</span>
<span class="nc" id="L634">            final String colName = column.getOutputName();</span>
<span class="nc" id="L635">            final String colClass = getStrategy().getJavaClassName(column);</span>
<span class="nc" id="L636">            final String colTypeFull = getJavaType(column.getType(resolver(out)), out);</span>
<span class="nc" id="L637">            final String colType = out.ref(colTypeFull);</span>
<span class="nc" id="L638">            final String colIdentifier = out.ref(getStrategy().getFullJavaIdentifier(column), colRefSegmentsMethod(column));</span>

            // fetchRangeOf[Column]([T]...)
            // -----------------------
<span class="nc bnc" id="L642" title="All 2 branches missed.">            if (!printDeprecationIfUnknownTypeMethod(out, colTypeFull)) {</span>
<span class="nc" id="L643">                out.javadoc(&quot;Fetch records that have &lt;code&gt;%s BETWEEN lowerInclusive AND upperInclusive&lt;/code&gt;&quot;, colName);</span>
            }
<span class="nc" id="L645">            printNonnullAnnotation(out);</span>
<span class="nc" id="L646">            out.println(&quot;public %s&lt;%s&gt; fetchRangeOf%s(%s lowerInclusive, %s upperInclusive) {&quot;, List.class, pType, colClass, colType, colType);</span>
<span class="nc" id="L647">            out.println(&quot;return fetchRange(%s, lowerInclusive, upperInclusive);&quot;, colIdentifier);</span>
<span class="nc" id="L648">            out.println(&quot;}&quot;);</span>


            // fetchBy[Column]([T]...)
            // -----------------------
<span class="nc bnc" id="L653" title="All 2 branches missed.">            if (!printDeprecationIfUnknownTypeMethod(out, colTypeFull)) {</span>
<span class="nc" id="L654">                out.javadoc(&quot;Fetch records that have &lt;code&gt;%s IN (values)&lt;/code&gt;&quot;, colName);</span>
            }

<span class="nc" id="L657">            printNonnullAnnotation(out);</span>
<span class="nc" id="L658">            out.println(&quot;public %s&lt;%s&gt; fetchBy%s(%s... values) {&quot;, List.class, pType, colClass, colType);</span>
<span class="nc" id="L659">            out.println(&quot;return fetch(%s, values);&quot;, colIdentifier);</span>
<span class="nc" id="L660">            out.println(&quot;}&quot;);</span>
            //DeleteBy[columns](Void)


            // fetchOneBy[Column]([T])
            // -----------------------
            ukLoop:
<span class="nc bnc" id="L667" title="All 2 branches missed.">            for (UniqueKeyDefinition uk : column.getUniqueKeys()) {</span>

                // If column is part of a single-column unique key...
<span class="nc bnc" id="L670" title="All 4 branches missed.">                if (uk.getKeyColumns().size() == 1 &amp;&amp; uk.getKeyColumns().get(0).equals(column)) {</span>
<span class="nc bnc" id="L671" title="All 2 branches missed.">                    if (!printDeprecationIfUnknownTypeMethod(out, colTypeFull)) {</span>
<span class="nc" id="L672">                        out.javadoc(&quot;Fetch a unique record that has &lt;code&gt;%s = value&lt;/code&gt;&quot;, colName);</span>
                    }
<span class="nc" id="L674">                    printNullableAnnotation(out);</span>
<span class="nc" id="L675">                    out.println(&quot;public %s fetchOneBy%s(%s value) {&quot;, pType, colClass, colType);</span>
<span class="nc" id="L676">                    out.println(&quot;return fetchOne(%s, value);&quot;, colIdentifier);</span>
<span class="nc" id="L677">                    out.println(&quot;}&quot;);</span>


<span class="nc" id="L680">                    break ukLoop;</span>
                }
<span class="nc" id="L682">            }</span>
<span class="nc" id="L683">        }</span>

        //For GET method for composite primary key.
<span class="nc" id="L686">        out.javadoc(&quot;Created custom fetchRecord Method&quot;);</span>
<span class="nc" id="L687">        out.print(&quot;public %s fetchRecord(&quot;, pType);</span>
<span class="nc" id="L688">        int flag = 0;</span>
<span class="nc bnc" id="L689" title="All 2 branches missed.">        for (ColumnDefinition column : table.getColumns()) {</span>
<span class="nc" id="L690">            final String colClass = getStrategy().getJavaClassName(column);</span>
<span class="nc" id="L691">            final String colTypeFull = getJavaType(column.getType(resolver(out)), out);</span>
<span class="nc" id="L692">            final String colType1 = out.ref(colTypeFull);</span>
<span class="nc bnc" id="L693" title="All 2 branches missed.">            if (key == column.getPrimaryKey()) {</span>
<span class="nc bnc" id="L694" title="All 2 branches missed.">                if (flag != size - 1) {</span>
<span class="nc" id="L695">                    out.print(&quot;%s %s,&quot;, colType1, colClass);</span>
<span class="nc" id="L696">                    flag++;</span>
                } else {
<span class="nc" id="L698">                    out.println(&quot;%s %s){&quot;, colType1, colClass);</span>
                }
            }
<span class="nc" id="L701">        }</span>
<span class="nc" id="L702">        out.print(&quot;return this.ctx().selectFrom(%s).where(&quot;, tableIdentifier);</span>
<span class="nc" id="L703">        int flag2 = 0;</span>
<span class="nc bnc" id="L704" title="All 2 branches missed.">        for (ColumnDefinition column : table.getColumns()) {</span>
<span class="nc" id="L705">            final String colClass1 = getStrategy().getJavaClassName(column);</span>
<span class="nc" id="L706">            final String colIdentifier1 = out.ref(getStrategy().getFullJavaIdentifier(column), colRefSegmentsMethod(column));</span>
<span class="nc bnc" id="L707" title="All 2 branches missed.">            if (key == column.getPrimaryKey()) {</span>
<span class="nc bnc" id="L708" title="All 2 branches missed.">                if (flag2 != size - 1) {</span>
<span class="nc bnc" id="L709" title="All 2 branches missed.">                    if (flag2 == 0) {</span>
<span class="nc" id="L710">                        out.print(&quot;%s.eq(%s).and(&quot;, colIdentifier1, colClass1);</span>
                    } else {
<span class="nc" id="L712">                        out.print(&quot;%s.eq(%s)).and(&quot;, colIdentifier1, colClass1);</span>
                    }
<span class="nc" id="L714">                    flag2++;</span>
                } else {
<span class="nc bnc" id="L716" title="All 2 branches missed.">                    if (size == 1) {</span>
<span class="nc" id="L717">                        out.println(&quot;%s.eq(%s)).fetchOneInto(%s.class);&quot;, colIdentifier1, colClass1, pType);</span>
<span class="nc" id="L718">                        out.println(&quot;}&quot;);</span>
                    } else {
<span class="nc" id="L720">                        out.println(&quot;%s.eq(%s))).fetchOneInto(%s.class);&quot;, colIdentifier1, colClass1, pType);</span>
<span class="nc" id="L721">                        out.println(&quot;}&quot;);</span>
                    }
                }
            }
<span class="nc" id="L725">        }</span>

        //For Insert Method
<span class="nc" id="L728">        out.javadoc(&quot;Created custom Insert records Method&quot;);</span>
<span class="nc" id="L729">        out.println(&quot;public %s insertRecord(%s classObject) {&quot;, pType, pType);</span>
<span class="nc" id="L730">        out.println(&quot;%s record=this.ctx().newRecord(%s);&quot;, tableRecord, tableIdentifier);</span>
<span class="nc bnc" id="L731" title="All 2 branches missed.">        for (ColumnDefinition column : table.getColumns()) {</span>
<span class="nc" id="L732">            final String colClass = getStrategy().getJavaClassName(column);</span>
<span class="nc bnc" id="L733" title="All 2 branches missed.">            if (size == 1) {</span>
<span class="nc bnc" id="L734" title="All 2 branches missed.">                if (key != column.getPrimaryKey()) {</span>
<span class="nc" id="L735">                    out.println(&quot;record.set%s(classObject.get%s());&quot;, colClass, colClass);</span>
                }
            } else {
<span class="nc" id="L738">                out.println(&quot;record.set%s(classObject.get%s());&quot;, colClass, colClass);</span>
            }
<span class="nc" id="L740">        }</span>
<span class="nc" id="L741">        out.println(&quot;record.store();&quot;);</span>
<span class="nc" id="L742">        out.println(&quot;%s result=record.into(%s.class);&quot;, pType, pType);</span>
<span class="nc" id="L743">        out.println(&quot;return result;&quot;);</span>
<span class="nc" id="L744">        out.println(&quot;}&quot;);</span>


<span class="nc bnc" id="L747" title="All 2 branches missed.">        if (size &gt; 1) {</span>
            //For Update COMPOSITE KEYS
<span class="nc" id="L749">            out.javadoc(&quot;Created custom Update record Method&quot;);</span>
<span class="nc" id="L750">            out.println(&quot;public int updateRecord(%s classObject){&quot;, pType);</span>
<span class="nc" id="L751">            out.println(&quot;int result=this.ctx().update(%s)&quot;, tableIdentifier);</span>
<span class="nc bnc" id="L752" title="All 2 branches missed.">            for (ColumnDefinition column1 : table.getColumns()) {</span>
<span class="nc" id="L753">                final String colClass1 = getStrategy().getJavaClassName(column1);</span>
<span class="nc" id="L754">                final String colIdentifier1 = out.ref(getStrategy().getFullJavaIdentifier(column1), colRefSegmentsMethod(column1));</span>
<span class="nc bnc" id="L755" title="All 2 branches missed.">                if (key != column1.getPrimaryKey()) {</span>
<span class="nc" id="L756">                    out.println(&quot;.set(%s,classObject.get%s())&quot;, colIdentifier1, colClass1);</span>
                }
<span class="nc" id="L758">            }</span>
<span class="nc" id="L759">            out.print(&quot;.where(&quot;);</span>
<span class="nc" id="L760">            int flag1 = 0;</span>
<span class="nc bnc" id="L761" title="All 2 branches missed.">            for (ColumnDefinition column : table.getColumns()) {</span>
<span class="nc" id="L762">                final String colClass1 = getStrategy().getJavaClassName(column);</span>
<span class="nc" id="L763">                final String colIdentifier1 = out.ref(getStrategy().getFullJavaIdentifier(column), colRefSegmentsMethod(column));</span>

<span class="nc bnc" id="L765" title="All 2 branches missed.">                if (key == column.getPrimaryKey()) {</span>
<span class="nc bnc" id="L766" title="All 2 branches missed.">                    if (flag1 != size - 1) {</span>
<span class="nc bnc" id="L767" title="All 2 branches missed.">                        if (flag1 == 0) {</span>
<span class="nc" id="L768">                            out.print(&quot;%s.eq(classObject.get%s()).and(&quot;, colIdentifier1, colClass1);</span>
                        } else {
<span class="nc" id="L770">                            out.print(&quot;%s.eq(classObject.get%s())).and(&quot;, colIdentifier1, colClass1);</span>
                        }
<span class="nc" id="L772">                        flag1++;</span>
                    } else {
<span class="nc" id="L774">                        out.println(&quot;%s.eq(classObject.get%s()))).execute();&quot;, colIdentifier1, colClass1, pType);</span>
<span class="nc" id="L775">                        out.println(&quot;return result;&quot;);</span>
<span class="nc" id="L776">                        out.println(&quot;}&quot;);</span>
                    }
                }
<span class="nc" id="L779">            }</span>
            //For Delete COMPOSITE KEYS
<span class="nc" id="L781">            out.javadoc(&quot;Created custom Delete method &quot;);</span>
<span class="nc" id="L782">            out.print(&quot;public int deleteRecord(&quot;);</span>
<span class="nc" id="L783">            int flag5 = 0;</span>
<span class="nc bnc" id="L784" title="All 2 branches missed.">            for (ColumnDefinition column : table.getColumns()) {</span>
<span class="nc" id="L785">                final String colClass = getStrategy().getJavaClassName(column);</span>
<span class="nc" id="L786">                final String colTypeFull = getJavaType(column.getType(resolver(out)), out);</span>
<span class="nc" id="L787">                final String colType1 = out.ref(colTypeFull);</span>
<span class="nc bnc" id="L788" title="All 2 branches missed.">                if (key == column.getPrimaryKey()) {</span>
<span class="nc bnc" id="L789" title="All 2 branches missed.">                    if (flag5 != size - 1) {</span>
<span class="nc" id="L790">                        out.print(&quot;%s %s,&quot;, colType1, colClass);</span>
<span class="nc" id="L791">                        flag5++;</span>
                    } else {
<span class="nc" id="L793">                        out.println(&quot;%s %s){&quot;, colType1, colClass);</span>
                    }
                }
<span class="nc" id="L796">            }</span>
<span class="nc" id="L797">            out.print(&quot;return this.ctx().deleteFrom(%s).where(&quot;, tableIdentifier);</span>
<span class="nc" id="L798">            int flag6 = 0;</span>
<span class="nc bnc" id="L799" title="All 2 branches missed.">            for (ColumnDefinition column : table.getColumns()) {</span>
<span class="nc" id="L800">                final String colClass1 = getStrategy().getJavaClassName(column);</span>
<span class="nc" id="L801">                final String colIdentifier1 = out.ref(getStrategy().getFullJavaIdentifier(column), colRefSegmentsMethod(column));</span>
<span class="nc bnc" id="L802" title="All 2 branches missed.">                if (key == column.getPrimaryKey()) {</span>
<span class="nc bnc" id="L803" title="All 2 branches missed.">                    if (flag6 != size - 1) {</span>
<span class="nc bnc" id="L804" title="All 2 branches missed.">                        if (flag6 == 0) {</span>
<span class="nc" id="L805">                            out.print(&quot;%s.eq(%s).and(&quot;, colIdentifier1, colClass1);</span>
                        } else {
<span class="nc" id="L807">                            out.print(&quot;%s.eq(%s)).and(&quot;, colIdentifier1, colClass1);</span>
                        }
<span class="nc" id="L809">                        flag6++;</span>
                    } else {
<span class="nc" id="L811">                        out.println(&quot;%s.eq(%s))).execute();&quot;, colIdentifier1, colClass1, pType);</span>
<span class="nc" id="L812">                        out.println(&quot;}&quot;);</span>
                    }
                }
<span class="nc" id="L815">            }</span>
<span class="nc" id="L816">        } else {</span>
            //For Delete single primary key
<span class="nc bnc" id="L818" title="All 2 branches missed.">            for (ColumnDefinition column : table.getColumns()) {</span>
<span class="nc" id="L819">                final String colClass = getStrategy().getJavaClassName(column);</span>
<span class="nc" id="L820">                final String colTypeFull = getJavaType(column.getType(resolver(out)), out);</span>
<span class="nc" id="L821">                final String colType = out.ref(colTypeFull);</span>
<span class="nc" id="L822">                final String colIdentifier = out.ref(getStrategy().getFullJavaIdentifier(column), colRefSegmentsMethod(column));</span>
<span class="nc bnc" id="L823" title="All 2 branches missed.">                if (key == column.getPrimaryKey()) {</span>
<span class="nc" id="L824">                    out.javadoc(&quot;Created custom Delete record Method&quot;);</span>
<span class="nc" id="L825">                    out.println(&quot;public int deleteRecord(%s %s){&quot;, colType, colClass);</span>
<span class="nc" id="L826">                    out.println(&quot;int result=this.ctx().deleteFrom(%s).where(%s.eq(%s)).execute();&quot;, tableIdentifier, colIdentifier, colClass);</span>
<span class="nc" id="L827">                    out.println(&quot;return result;&quot;);</span>
<span class="nc" id="L828">                    out.println(&quot;}&quot;);</span>
                }
<span class="nc" id="L830">            }</span>
<span class="nc" id="L831">            ColumnDefinition column = table.getColumns().get(0);</span>
<span class="nc" id="L832">            final String colClass = getStrategy().getJavaClassName(column);</span>
<span class="nc" id="L833">            final String colIdentifier = out.ref(getStrategy().getFullJavaIdentifier(column), colRefSegmentsMethod(column));</span>
            //For update single primary key
<span class="nc" id="L835">            out.javadoc(&quot;Created custom Update record Method&quot;);</span>
<span class="nc" id="L836">            out.println(&quot;public int updateRecord(%s classObject){&quot;, pType);</span>
<span class="nc" id="L837">            out.println(&quot;int result=this.ctx().update(%s)&quot;, tableIdentifier);</span>
<span class="nc bnc" id="L838" title="All 2 branches missed.">            for (ColumnDefinition column1 : table.getColumns()) {</span>
<span class="nc" id="L839">                final String colClass1 = getStrategy().getJavaClassName(column1);</span>
<span class="nc" id="L840">                final String colIdentifier1 = out.ref(getStrategy().getFullJavaIdentifier(column1), colRefSegmentsMethod(column1));</span>
<span class="nc bnc" id="L841" title="All 2 branches missed.">                if (key != column1.getPrimaryKey()) {</span>
<span class="nc" id="L842">                    out.println(&quot;.set(%s,classObject.get%s())&quot;, colIdentifier1, colClass1);</span>
                }
<span class="nc" id="L844">            }</span>
<span class="nc" id="L845">            out.println(&quot;.where(%s.eq(classObject.get%s())).execute();&quot;, colIdentifier, colClass);</span>
<span class="nc" id="L846">            out.println(&quot;return result;&quot;);</span>
<span class="nc" id="L847">            out.println(&quot;}&quot;);</span>

        }
<span class="nc" id="L850">        generateDaoClassFooter(table, out);</span>
<span class="nc" id="L851">        out.println(&quot;}&quot;);</span>
<span class="nc" id="L852">    }</span>

    protected String ref(String clazzOrId, int keepSegments) {
<span class="nc bnc" id="L855" title="All 2 branches missed.">        return clazzOrId == null ? null : ref(Arrays.asList(clazzOrId), keepSegments).get(0);</span>
    }


    protected List&lt;String&gt; ref(List&lt;String&gt; clazzOrId, int keepSegments) {
<span class="nc bnc" id="L860" title="All 2 branches missed.">        return clazzOrId == null ? Collections.emptyList() : clazzOrId;</span>
    }

    //
//    /**
//     * Subclasses may override this method to provide alternative DAO
//     * constructor annotations, such as DI annotations. [#10801]
//     */
    protected void printDaoConstructorAnnotations(TableDefinition table, JavaWriter out) {
<span class="nc bnc" id="L869" title="All 2 branches missed.">        if (generateSpringAnnotations()) {</span>
<span class="nc" id="L870">            out.println(&quot;@%s&quot;, out.ref(&quot;org.springframework.beans.factory.annotation.Autowired&quot;));</span>
        }
<span class="nc" id="L872">    }</span>


    private int colRefSegmentsMethod(Definition column) {
<span class="nc bnc" id="L876" title="All 4 branches missed.">        if (column instanceof TypedElementDefinition &amp;&amp; ((TypedElementDefinition&lt;?&gt;) column).getContainer() instanceof UDTDefinition) {</span>
<span class="nc" id="L877">            return 2;</span>
        }
<span class="nc bnc" id="L879" title="All 2 branches missed.">        if (!getStrategy().getInstanceFields()) {</span>
<span class="nc" id="L880">            return 2;</span>
        }

<span class="nc" id="L883">        return 3;</span>
    }


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>